{% extends "admin/admin_base.html" %}
{% block content %}
<div id="projects" class="filter">
		<div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title">Administration</div>
                    <h2><span style="color: white; ">Welcome Admin User</span></h2>
                </div> <!-- end of col -->
            </div> <!-- end of row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="button-group filters-button-group">
                            <a class="button"  href="/admin/new"><span>Add Challenges</span></a>
                    </div> <!-- end of button group -->
                </div> <!-- end of col -->
            </div> <!-- end of row -->

		</div> <!-- end of container -->

    </div> <!-- end of filter -->

{% endblock %}

{% block details %}
<div id="intro" class="basic-1">
        <div class="container">



<div>
<table id="challenges" class="table table-striped border">
<thead>
<tr>

<th class="sort-col text-center"><b>ID</b> </th>
<th class="sort-col"><b>Name</b> </th>
<th class="d-none d-md-table-cell d-lg-table-cell sort-col"><b>Category</b> </th>
<th class="d-none d-md-table-cell d-lg-table-cell sort-col text-center"><b>Value</b> </th>

<th class="d-none d-md-table-cell d-lg-table-cell sort-col text-center"><b>State</b> </th>
</tr>
</thead>

    <script>
        function viewmore(c){
            alert(
                "ID:  "+c.id+"\nChallenges Name:  "+c.name+"\nCategory:  "+c.cate+"\nflag:  "+c.flag
            )
            // alert(c)
        }
    </script>
    <script>
        function del(c){
            var r = confirm("是否要 隐藏/显示 "+"[ID: "+c.id+"  Name: "+c.name+"] 该题?");
            if (r == true) {
                var id = c.id;
                var state = c.state;
                var new_state;
                if(state == 1){
                    new_state = 0;
                }
                else{
                    new_state = 1;
                }
                var httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
                httpRequest.open('POST', location.href = '/admin/challenges_list', false); //第二步：打开连接
                httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");//设置请求头
                httpRequest.send('id=' + id + '&new_state=' + new_state)
            }
        }
    </script>

{% for clist in challenges %}
<tbody>
<tr data-href="/admin/challenges/1">
<td class="text-center">{{clist.id}}</td>
<td>  <a onclick="viewmore( {{clist}} )">
    <span class="badge badge-primary">
        {{clist.name}}
    </span>
</a></td>
<td class="d-none d-md-table-cell d-lg-table-cell">{{clist.cate}}</td>
<td class="d-none d-md-table-cell d-lg-table-cell text-center">{{clist.value}}</td>
<td class="d-none d-md-table-cell d-lg-table-cell text-center">
    <a onclick="del({{clist}})">
    {% if clist.state == 1 %}
<span class="badge badge-success">visible</span>
    {% else %}
<span class="badge badge-danger">hidden</span>
    {% endif %}
    </a>
</td>
</tr>
</tbody>
{% endfor %}

</table>
</div>
</div>




    </div>
{% endblock %}